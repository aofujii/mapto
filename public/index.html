<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MapTo - ロケーション投稿プロトタイプ</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      crossorigin=""
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="app-shell">
      <div id="map" class="map-view"></div>
      <div class="overlay">
        <button id="menu-toggle" class="menu-toggle" aria-label="メニューを開く">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <aside
          class="menu-panel"
          id="menu-panel"
          aria-hidden="true"
          tabindex="-1"
        >
          <div class="menu-header">
            <div class="brand">
              <span class="brand-mark">📍</span>
              <div>
                <h1>MapTo</h1>
                <p>近くの人と気分をシェアするマップ</p>
              </div>
            </div>
            <button id="menu-close" class="menu-close" aria-label="メニューを閉じる">
              ✕
            </button>
          </div>
          <div class="menu-body">
            <p>
              気分の絵文字だけでも投稿OK。<br />
              24時間で自動的に消えるので、気軽にシェアしましょう。
            </p>
            <button
              type="button"
              id="enable-notifications"
              class="secondary-button menu-action"
            >
              投稿リマインダーを受け取る
            </button>
          </div>
        </aside>

        <div class="quick-actions">
          <button
            type="button"
            id="show-composer-btn"
            class="map-control-button"
            aria-label="投稿フォームを開く"
          >
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path
                d="M12 22a1 1 0 0 1-1-1v-8H3a1 1 0 0 1 0-2h8V3a1 1 0 0 1 2 0v8h8a1 1 0 0 1 0 2h-8v8a1 1 0 0 1-1 1Z"
              />
            </svg>
            投稿する
          </button>
          <button
            type="button"
            id="map-center-btn"
            class="map-control-button"
            aria-label="現在地に移動"
          >
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path
                d="M12 5.5a6.5 6.5 0 1 0 6.5 6.5A6.508 6.508 0 0 0 12 5.5zm8.944 5.5h-1.695A7.761 7.761 0 0 0 13 5.751V4.056a1 1 0 0 0-2 0v1.695a7.761 7.761 0 0 0-6.249 5.249H3.056a1 1 0 1 0 0 2h1.695A7.761 7.761 0 0 0 11 18.249v1.695a1 1 0 1 0 2 0v-1.695a7.761 7.761 0 0 0 6.249-6.249h1.695a1 1 0 0 0 0-2ZM12 17a5 5 0 1 1 5-5 5.006 5.006 0 0 1-5 5Z"
              />
            </svg>
            現在地
          </button>
        </div>

        <section class="composer-card card-hidden" id="composer-card" data-card="composer">
          <form id="post-form" class="post-form">
            <div class="composer-header">
              <h2>いまの気分をシェア</h2>
              <div class="composer-actions">
                <button
                  type="button"
                  id="close-composer-btn"
                  class="secondary-button ghost"
                >
                  閉じる
                </button>
                <button
                  type="button"
                  id="use-current-location"
                  class="secondary-button ghost"
                >
                  現在地に合わせる
                </button>
              </div>
            </div>

            <div class="composer-body collapsible-body" id="composer-body" data-open="true">
              <div class="mood-picker" id="mood-picker">
                <button type="button" data-mood="☺️">☺️</button>
                <button type="button" data-mood="😀">😀</button>
                <button type="button" data-mood="🥺">🥺</button>
                <button type="button" data-mood="😔">😔</button>
                <button type="button" data-mood="😡">😡</button>
                <button type="button" data-mood="☀️">☀️</button>
                <button type="button" data-mood="☁️">☁️</button>
                <button type="button" data-mood="☂️">☂️</button>
                <button type="button" data-mood="☕">☕</button>
                <button type="button" data-mood="🍜">🍜</button>
                <button type="button" data-mood="💻️">💻️</button>
                <button type="button" data-mood="🚍️">🚍️</button>
                <button type="button" data-mood="🚗">🚗</button>
                <button type="button" data-mood="🚃">🚃</button>
              </div>

              <label class="sr-only" for="post-text">投稿内容</label>
              <textarea
                id="post-text"
                name="text"
                maxlength="500"
                placeholder="メッセージやおすすめを残してみよう（なくてもOK）"
              ></textarea>
              <div class="form-footer">
                <span id="selected-location" class="location-hint"
                  >投稿位置が未設定です。現在地か地図をタップして選んでください。</span
                >
                <button type="submit" class="primary-button">マップに投稿</button>
              </div>
            </div>
          </form>
        </section>

        <section class="timeline-card" id="timeline-card" data-card="timeline">
            <div class="timeline-header">
              <div class="timeline-header-text">
                <h2>近くの投稿</h2>
                <p>最新の24時間だけが表示されます</p>
              </div>
            <div class="timeline-header-actions">
              <label class="radius-select" for="radius">
                <span>範囲</span>
                <select id="radius">
                  <option value="1000">1 km</option>
                  <option value="3000">3 km</option>
                  <option value="5000" selected>5 km</option>
                  <option value="10000">10 km</option>
                </select>
              </label>
              <button
                type="button"
                class="collapse-toggle"
                data-target="timeline"
                aria-expanded="true"
                aria-controls="timeline-body"
              >
                <span aria-hidden="true">－</span>
                <span class="sr-only">タイムラインを折りたたむ</span>
              </button>
            </div>
          </div>
          <div class="timeline-body collapsible-body" id="timeline-body" data-open="true">
            <ul id="timeline" class="timeline-list"></ul>
          </div>
        </section>
      </div>
    </main>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      crossorigin=""
    ></script>
    <script src="/main.js" type="module"></script>
  </body>
</html>
